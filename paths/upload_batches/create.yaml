summary: Create upload batch
description: |
  Groups multiple file uploads into a single batch. Optionally, launches the deletion of unmentioned translation keys
  after all uploads in the batch are completed.
operationId: upload_batches/create
tags:
  - Upload Batches
parameters:
  - "$ref": "../../parameters.yaml#/X-PhraseApp-OTP"
  - "$ref": "../../parameters.yaml#/project_id"
requestBody:
  required: true
  content:
    application/json:
      schema:
        type: object
        title: upload_batches/create/parameters
        required:
          - upload_ids
        properties:
          branch:
            description: specify the branch to use
            type: string
            example: my-feature-branch
          delete_unmentioned_keys:
            description: If set to true, after all uploads in the batch are completed, translation keys that were not mentioned in any of the uploaded files will be deleted.
            type: boolean
            example: true
          upload_ids:
            description: Array of upload IDs to include in the batch
            type: array
            items:
              type: string
            example:
              - abcd1234cdef1234abcd1234cdef1234
              - bcde2345defg2345bcde2345defg2345
responses:
  '201':
    description: Created
    content:
      application/json:
        schema:
          "$ref": "../../schemas/upload_batch.yaml#/upload_batch"
    headers:
      X-Rate-Limit-Limit:
        "$ref": "../../headers.yaml#/X-Rate-Limit-Limit"
      X-Rate-Limit-Remaining:
        "$ref": "../../headers.yaml#/X-Rate-Limit-Remaining"
      X-Rate-Limit-Reset:
        "$ref": "../../headers.yaml#/X-Rate-Limit-Reset"
  '400':
    "$ref": "../../responses.yaml#/400"
  '404':
    "$ref": "../../responses.yaml#/404"
  '429':
    "$ref": "../../responses.yaml#/429"
x-code-samples:
  - lang: Curl
    source: |-
      curl "https://api.phrase.com/v2/projects/:project_id/upload_batches" \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "branch": "my-feature-branch",
        "delete_unmentioned_keys": true,
        "upload_ids": [
          "abcd1234cdef1234abcd1234cdef1234",
          "bcde2345defg2345bcde2345defg2345"
        ]
      }' \
      -u <token>:
  - lang: CLI v2
    source: |-
      phrase upload_batches create --project-id :project_id \
      --data '{
        "branch": "my-feature-branch",
        "delete_unmentioned_keys": true,
        "upload_ids": [
          "abcd1234cdef1234abcd1234cdef1234",
          "bcde2345defg2345bcde2345defg2345"
        ]
      }' \
      --access_token <token>
x-cli-version: '2.12'
